# movies-explorer-dockerized

В этом проекте объединены Фронт и Бэк дипломного проекта яндекс-практикума по программе "Веб-разработчик". 
Ранее требовалось вручную разворачивть фронт и бэк на сервере, отдельно ставить и настраивать БД, реверс-проекси и заодно решать вопрос с SSL. И вручную переключатся между средами: прод или дев.

Теперь все недостаки исправлены:
- Проект разнесён по докер-контейнерам, у которых нет доступа наружу. За доступ отвечает реверс-прокси
- В роли реверс-прокси взят Caddy, который самостоятельно создаёт SSL-сертификаты на проде.
- Для Бэкенда (API) больше не требуется отдельный домен. Все запросы в контейнера backend проксируются с адреса `probaland.ru/api/`
- Среда выполнения фронтенда и конфиг caddy (prod или dev) больше не задаются вручную и зависит от запущенного файла docker-compose
- добавлен сервис для мониторинга контейнеров, который запускается по адресу `stat-dev.probaland.ru` в среде разработки и по адресу `stat.probaland.ru` на проде.
- Основные команды вынесены в Makefile. Для его использования понадобится установить пакет make. `sudo apt install make`


Общие требования для запуска:
- macOS, Linux, или Windows с WSL. Рекомендуются дистрибутивы Debian или Ubuntu
- Docker и Docker Compose
- Для запуска на сервере - свободные порты 80 и 443
- По желанию можно добавить пакет make. На Debian и Ubuntu - `sudo apt install make`

Запуск для локального теста или разработки
- Привязать в hosts домен dev.probaland.ru к локалхосту адресу `127.0.0.1	dev.probaland.ru` После надо применить изменения: логаутом, перезагрузкой или через консоль
- По желанию добавить в hosts `127.0.0.1	stat-dev.probaland.ru` для открытия dozzle
- `git clone https://github.com/kndenisenko/movies-explorer-dockerized.git`
- `cd movies-explorer-dockerized`
- `make prepare-debian` или make `prepare-macos`
- `make dev` или `docker compose -f docker-compose.dev.yml up -d`
- открыть https://dev.probaland.ru